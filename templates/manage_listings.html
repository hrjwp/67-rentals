<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <meta name="description" content="">
        <meta name="author" content="">

        <title>Manage Listings - 67 Rentals</title>

        <!-- CSS FILES -->
        <link rel="preconnect" href="https://fonts.googleapis.com">

        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

        <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">

        <link href="{{ url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet">

        <link href="{{ url_for('static', filename='css/bootstrap-icons.css') }}" rel="stylesheet">

        <link href="{{ url_for('static', filename='css/templatemo-tiya-golf-club.css') }}" rel="stylesheet">

        <style>
            :root {
              --white-color:                  #ffffff;
              --primary-color:                #81B29A;
              --secondary-color:              #3D405B;
              --section-bg-color:             #F4F1DE;
              --custom-btn-bg-color:          #F2CC8F;
              --custom-btn-bg-hover-color:    #E07A5F;
              --dark-color:                   #000000;
              --p-color:                      #717275;
              --link-hover-color:             #F2CC8F;

              --body-font-family:             'DM Sans', sans-serif;

              --h1-font-size:                 42px;
              --h2-font-size:                 36px;
              --h3-font-size:                 28px;
              --h4-font-size:                 24px;
              --h5-font-size:                 22px;
              --h6-font-size:                 20px;
              --p-font-size:                  18px;
              --menu-font-size:               16px;
              --btn-font-size:                14px;

              --border-radius-large:          100px;
              --border-radius-medium:         20px;
              --border-radius-small:          10px;

              --font-weight-normal:           400;
              --font-weight-medium:           500;
              --font-weight-bold:             700;
            }

            body {
              background-color: var(--white-color);
              font-family: var(--body-font-family);
            }

            .navbar {
                background: #3D405B;
                z-index: 99;
                padding-top: 15px;
                padding-bottom: 15px;
            }

            .nav-link {
                color: var(--white-color) !important;
                font-weight: 500;
            }

            .nav-link:hover {
                color: #F2CC8F!important;
            }

            .listing-card {
                background: white;
                border-radius: 8px;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
                margin-bottom: 20px;
                overflow: hidden;
                transition: transform 0.3s ease;
            }

            .listing-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            }

            .listing-image {
                width: 100%;
                height: 200px;
                object-fit: cover;
            }

            .listing-body {
                padding: 20px;
            }

            .listing-title {
                font-size: 1.5rem;
                font-weight: 600;
                color: #3D405B;
                margin-bottom: 10px;
            }

            .listing-info {
                display: flex;
                justify-content: space-between;
                margin-bottom: 10px;
                color: #666;
            }

            .listing-status {
                display: inline-block;
                padding: 5px 15px;
                border-radius: 20px;
                font-size: 0.875rem;
                font-weight: 500;
            }

            .status-active {
                background: #d4edda;
                color: #155724;
            }

            .status-inactive {
                background: #f8d7da;
                color: #721c24;
            }

            .listing-actions {
                display: flex;
                gap: 10px;
                margin-top: 15px;
            }

            .tab-buttons {
                margin-bottom: 30px;
            }

            .tab-btn {
                padding: 10px 30px;
                border: 2px solid #81B29A;
                background: white;
                color: #81B29A;
                border-radius: 5px;
                margin-right: 10px;
                cursor: pointer;
                font-weight: 500;
                transition: all 0.3s ease;
            }

            .tab-btn.active {
                background: #81B29A;
                color: white;
            }

            .tab-btn:hover {
                background: #81B29A;
                color: white;
            }

            .empty-state {
                text-align: center;
                padding: 60px 20px;
                color: #666;
            }

            .empty-state i {
                font-size: 4rem;
                color: #ddd;
                margin-bottom: 20px;
            }
        </style>

    </head>

    <body>

        <main>
<!-- Navbar -->
            <nav class="navbar navbar-expand-lg">
                <div class="container">
                    <a class="navbar-brand d-flex align-items-center" href="{{ url_for('seller_index') }}">
                        <img src="{{ url_for('static', filename='images/logo.png') }}" class="navbar-brand-image img-fluid" alt="67 Rentals">
                        <span class="navbar-brand-text">
                            67
                            <small>Rentals</small>
                        </span>
                    </a>

                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav ms-lg-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="{{ url_for('seller_index') }}#section_1">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="{{ url_for('seller_index') }}#section_2">About</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link active" href="{{ url_for('vehicle_listing_seller_logged') }}">Vehicles</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link click-scroll" href="{{ url_for('manage_listings') }}">Manage Listings</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="{{ url_for('seller_index') }}#section_4">Contact Us</a>
                            </li>


                            <li class="nav-item">
                                <a class="nav-link" href="{{ url_for('cart_logged') }}">
                                    <i class="bi bi-cart3"></i> Cart
                                </a>
                            </li>
                        </ul>
                        <div class="d-none d-lg-block ms-lg-3">
                          <a class="btn custom-btn custom-border-btn d-flex align-items-center gap-2" role="button">
                                    <i class="bi bi-person"></i>
                                    Seller
                                </a>
                        </div>
                    </div>
                </div>
            </nav>
<!-- Navbar end -->

            <section class="section-padding mt-5">
                <div class="container">
                    <div class="row">
                        <div class="col-12">
                            <h2 class="mb-4">Manage Your Listings</h2>

                            <!-- Tab Buttons -->
                            <div class="tab-buttons">
                                <button class="tab-btn active" onclick="showTab('view')">
                                    <i class="bi bi-list-ul"></i> View Listings
                                </button>
                                <button class="tab-btn" onclick="showTab('add')">
                                    <i class="bi bi-plus-circle"></i> Add New Listing
                                </button>
                            </div>

                            <!-- View Listings Tab -->
                            <div id="view-tab" class="tab-content">
                                <div class="d-flex justify-content-between align-items-center mb-4">
                                    <h3>Your Listings</h3>
                                    <div>
                                        <select class="form-select" id="filterStatus" onchange="filterListings()">
                                            <option value="all">All Status</option>
                                            <option value="active">Active</option>
                                            <option value="inactive">Inactive</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="row" id="listings-container">
                                    {% if listings %}
                                        {% for listing in listings %}
                                        <div class="col-lg-6 col-12 listing-item" data-status="{{ listing.status }}">
                                            <div class="listing-card">
                                                <img src="{{ url_for('static', filename=listing.image) }}" class="listing-image" alt="{{ listing.name }}">
                                                <div class="listing-body">
                                                    <div class="d-flex justify-content-between align-items-start mb-2">
                                                        <h4 class="listing-title">{{ listing.name }}</h4>
                                                        <span class="listing-status status-{{ listing.status }}">
                                                            {{ listing.status|capitalize }}
                                                        </span>
                                                    </div>

                                                    <div class="listing-info">
                                                        <span><i class="bi bi-fuel-pump"></i> {{ listing.fuel_type }}</span>
                                                        <span><i class="bi bi-geo-alt"></i> {{ listing.location }}</span>
                                                    </div>

                                                    <div class="listing-info">
                                                        <span><i class="bi bi-cash"></i> ${{ listing.price }}/day</span>
                                                        <span><i class="bi bi-calendar-check"></i> {{ listing.bookings }} bookings</span>
                                                    </div>

                                                    <p class="mb-3 text-muted">{{ listing.description[:100] }}...</p>

                                                    <div class="listing-actions">
                                                        <a href="{{ url_for('edit_listing', listing_id=listing.id) }}" class="btn btn-sm btn-outline-primary">
                                                            <i class="bi bi-pencil"></i> Edit
                                                        </a>
                                                        <form action="{{ url_for('toggle_listing_status', listing_id=listing.id) }}" method="POST" style="display: inline;">
                                                            <button type="submit" class="btn btn-sm btn-outline-secondary">
                                                                <i class="bi bi-power"></i>
                                                                {% if listing.status == 'active' %}Deactivate{% else %}Activate{% endif %}
                                                            </button>
                                                        </form>
                                                        <form action="{{ url_for('delete_listing', listing_id=listing.id) }}" method="POST" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this listing?');">
                                                            <button type="submit" class="btn btn-sm btn-outline-danger">
                                                                <i class="bi bi-trash"></i> Delete
                                                            </button>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        {% endfor %}
                                    {% else %}
                                        <div class="col-12">
                                            <div class="empty-state">
                                                <i class="bi bi-inbox"></i>
                                                <h4>No listings yet</h4>
                                                <p>Start by adding your first vehicle listing</p>
                                                <button class="btn custom-btn mt-3" onclick="showTab('add')">
                                                    <i class="bi bi-plus-circle"></i> Add Your First Listing
                                                </button>
                                            </div>
                                        </div>
                                    {% endif %}
                                </div>
                            </div>

                            <!-- Add New Listing Tab -->
                            <div id="add-tab" class="tab-content" style="display: none;">
                                <div class="row justify-content-center">
                                    <div class="col-lg-8">
                                        <div class="listing-card">
                                            <div class="listing-body">
                                                <h3 class="mb-4">Add New Vehicle Listing</h3>

                                                <form action="{{ url_for('add_listing') }}" method="POST" enctype="multipart/form-data">
                                                    <div class="row">
                                                        <div class="col-12 mb-3">
                                                            <label class="form-label">Vehicle Name *</label>
                                                            <input type="text" class="form-control" name="vehicle_name" required placeholder="e.g., Toyota Camry 2023">
                                                        </div>

                                                        <div class="col-md-6 mb-3">
                                                            <label class="form-label">Vehicle Type *</label>
                                                            <select class="form-select" name="vehicle_type" required>
                                                                <option value="">Select Type</option>
                                                                <option value="car">Car</option>
                                                                <option value="motorcycle">Motorcycle</option>
                                                                <option value="van">Van</option>
                                                                <option value="suv">SUV</option>
                                                            </select>
                                                        </div>

                                                        <div class="col-md-6 mb-3">
                                                            <label class="form-label">Fuel Type *</label>
                                                            <select class="form-select" name="fuel_type" required>
                                                                <option value="">Select Fuel Type</option>
                                                                <option value="petrol">Petrol</option>
                                                                <option value="diesel">Diesel</option>
                                                                <option value="hybrid">Hybrid</option>
                                                                <option value="electric">Electric</option>
                                                            </select>
                                                        </div>

                                                        <div class="col-md-6 mb-3">
                                                            <label class="form-label">Daily Rental Price ($) *</label>
                                                            <input type="number" class="form-control" name="price" required placeholder="100">
                                                        </div>

                                                        <div class="col-md-6 mb-3">
                                                            <label class="form-label">Pickup Location *</label>
                                                            <input type="text" class="form-control" name="location" required placeholder="e.g., Jurong Point, Singapore">
                                                        </div>

                                                        <div class="col-12 mb-3">
                                                            <label class="form-label">Vehicle Description *</label>
                                                            <textarea class="form-control" name="description" rows="4" required placeholder="Describe your vehicle, its features, and condition..."></textarea>
                                                        </div>

                                                        <div class="col-12 mb-3">
                                                            <label class="form-label">Upload Vehicle Images *</label>
                                                            <input type="file" class="form-control" name="images" accept="image/*" multiple required>
                                                            <small class="text-muted">You can upload multiple images</small>
                                                        </div>

                                                        <div class="col-md-6 mb-3">
                                                            <label class="form-label">Seating Capacity</label>
                                                            <input type="number" class="form-control" name="seating" placeholder="5">
                                                        </div>

                                                        <div class="col-md-6 mb-3">
                                                            <label class="form-label">Year of Manufacture</label>
                                                            <input type="number" class="form-control" name="year" placeholder="2023">
                                                        </div>

                                                        <div class="col-12 mb-4">
                                                            <div class="form-check">
                                                                <input class="form-check-input" type="checkbox" id="terms" required>
                                                                <label class="form-check-label" for="terms">
                                                                    I confirm that all information provided is accurate and I own or have permission to list this vehicle
                                                                </label>
                                                            </div>
                                                        </div>

                                                        <div class="col-12">
                                                            <button type="submit" class="btn custom-btn w-100">
                                                                <i class="bi bi-check-circle"></i> Submit Listing
                                                            </button>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </section>

        </main>

        <footer class="site-footer" style="background-color: #3D405B; color: white; padding: 40px 0;">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6 col-12 text-center text-lg-start mb-3">
                        <span class="navbar-brand-text">
                            67
                            <small>&nbsp; Rentals</small>
                        </span>
                    </div>
                    <div class="col-lg-6 col-12 text-center text-lg-end">
                        <p class="mb-0">Copyright Â© 2048 67 Rentals</p>
                    </div>
                </div>
            </div>
        </footer>



        <!-- JAVASCRIPT FILES -->
        <script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
        <script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"></script>
        <script src="{{ url_for('static', filename='js/jquery.sticky.js') }}"></script>
        <script src="{{ url_for('static', filename='js/custom.js') }}"></script>

        <script>
            function showTab(tabName) {
                // Hide all tabs
                document.getElementById('view-tab').style.display = 'none';
                document.getElementById('add-tab').style.display = 'none';

                // Remove active class from all buttons
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.classList.remove('active');
                });

                // Show selected tab and activate button
                if (tabName === 'view') {
                    document.getElementById('view-tab').style.display = 'block';
                    document.querySelectorAll('.tab-btn')[0].classList.add('active');
                } else {
                    document.getElementById('add-tab').style.display = 'block';
                    document.querySelectorAll('.tab-btn')[1].classList.add('active');
                }
            }

            function filterListings() {
                const filterValue = document.getElementById('filterStatus').value;
                const listings = document.querySelectorAll('.listing-item');

                listings.forEach(listing => {
                    if (filterValue === 'all' || listing.dataset.status === filterValue) {
                        listing.style.display = 'block';
                    } else {
                        listing.style.display = 'none';
                    }
                });
            }
        </script>

    </body>
</html>